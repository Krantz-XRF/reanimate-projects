<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE Trustworthy #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-comment">-- This is needed because ErrorT is deprecated.</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-warnings-deprecations #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">{- |
Module      :  Lens.Micro.Mtl
Copyright   :  (C) 2013-2016 Edward Kmett, 2015-2016 Artyom Kazak, 2018 Monadfix
License     :  BSD-style (see the file LICENSE)
-}</span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Lens.Micro.Mtl</span><span>
</span><span id="line-19"></span><span class="hs-special">(</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Getting</span></span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#view"><span class="hs-identifier">view</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#preview"><span class="hs-identifier">preview</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#use"><span class="hs-identifier">use</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#preuse"><span class="hs-identifier">preuse</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Setting</span></span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator">(%=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#modifying"><span class="hs-identifier">modifying</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#assign"><span class="hs-identifier">assign</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3F%3D"><span class="hs-operator">(?=)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C~"><span class="hs-operator">(&lt;~)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Convenience</span></span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%26~"><span class="hs-operator">(&amp;~)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Specialised modifying operators</span></span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="hs-comment">-- $arith-note</span></span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2B%3D"><span class="hs-operator">(+=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#-%3D"><span class="hs-operator">(-=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2A%3D"><span class="hs-operator">(*=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2F%2F%3D"><span class="hs-operator">(//=)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Setting with passthrough</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%25%3D"><span class="hs-operator">(&lt;%=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C.%3D"><span class="hs-operator">(&lt;.=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3F%3D"><span class="hs-operator">(&lt;?=)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C%25%3D"><span class="hs-operator">(&lt;&lt;%=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C.%3D"><span class="hs-operator">(&lt;&lt;.=)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Zooming</span></span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.Internal.html#zoom"><span class="hs-identifier">zoom</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Lens.Micro.Mtl.Internal.html#magnify"><span class="hs-identifier">magnify</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">where</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Reader</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">State</span></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- microlens</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro.Internal</span></span><span>
</span><span id="line-56"></span><span class="hs-comment">-- Internal modules</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.Internal.html"><span class="hs-identifier">Lens.Micro.Mtl.Internal</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">{- |
'view' is a synonym for ('^.'), generalised for 'MonadReader' (we are able to use it instead of ('^.') since functions are instances of the 'MonadReader' class):

&gt;&gt;&gt; view _1 (1, 2)
1

When you're using 'Reader.Reader' for config and your config type has lenses generated for it, most of the time you'll be using 'view' instead of 'Reader.asks':

@
doSomething :: ('MonadReader' Config m) =&gt; m Int
doSomething = do
  thingy        &lt;- 'view' setting1  -- same as &#8220;'Reader.asks' ('^.' setting1)&#8221;
  anotherThingy &lt;- 'view' setting2
  ...
@
-}</span><span>
</span><span id="line-76"></span><span id="local-6989586621679042433"><span id="local-6989586621679042434"><span id="local-6989586621679042435"><span class="annot"><a href="Lens.Micro.Mtl.html#view"><span class="hs-identifier hs-type">view</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621679042435"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getting</span></span><span> </span><span class="annot"><a href="#local-6989586621679042433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042435"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042433"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042434"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042433"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-77"></span><span id="view"><span class="annot"><span class="annottext">view :: Getting a s a -&gt; m a
</span><a href="Lens.Micro.Mtl.html#view"><span class="hs-identifier hs-var hs-var">view</span></a></span></span><span> </span><span id="local-6989586621679042296"><span class="annot"><span class="annottext">Getting a s a
</span><a href="#local-6989586621679042296"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">Reader.asks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Const a s -&gt; a
forall a k (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">(Const a s -&gt; a) -&gt; (s -&gt; Const a s) -&gt; s -&gt; a
forall c b a. Coercible c b =&gt; (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">Getting a s a
</span><a href="#local-6989586621679042296"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Const a a
forall k a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#view"><span class="hs-pragma hs-type">view</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">{- |
'preview' is a synonym for ('^?'), generalised for 'MonadReader' (just like 'view', which is a synonym for ('^.')).

&gt;&gt;&gt; preview each [1..5]
Just 1
-}</span><span>
</span><span id="line-86"></span><span id="local-6989586621679042427"><span id="local-6989586621679042428"><span id="local-6989586621679042429"><span class="annot"><a href="Lens.Micro.Mtl.html#preview"><span class="hs-identifier hs-type">preview</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621679042429"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042428"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">First</span></span><span> </span><span class="annot"><a href="#local-6989586621679042427"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042429"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042427"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042428"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679042427"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-87"></span><span id="preview"><span class="annot"><span class="annottext">preview :: Getting (First a) s a -&gt; m (Maybe a)
</span><a href="Lens.Micro.Mtl.html#preview"><span class="hs-identifier hs-var hs-var">preview</span></a></span></span><span> </span><span id="local-6989586621679042291"><span class="annot"><span class="annottext">Getting (First a) s a
</span><a href="#local-6989586621679042291"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; Maybe a) -&gt; m (Maybe a)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">Reader.asks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">First a -&gt; Maybe a
forall a. First a -&gt; Maybe a
</span><span class="hs-identifier hs-var hs-var">getFirst</span></span><span> </span><span class="annot"><span class="annottext">(First a -&gt; Maybe a) -&gt; (s -&gt; First a) -&gt; s -&gt; Maybe a
forall c b a. Coercible c b =&gt; (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">Getting (First a) s a -&gt; (a -&gt; First a) -&gt; s -&gt; First a
forall r s a. Getting r s a -&gt; (a -&gt; r) -&gt; s -&gt; r
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span> </span><span class="annot"><span class="annottext">Getting (First a) s a
</span><a href="#local-6989586621679042291"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a -&gt; First a
forall a. Maybe a -&gt; First a
</span><span class="hs-identifier hs-var">First</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; First a) -&gt; (a -&gt; Maybe a) -&gt; a -&gt; First a
forall c b a. Coercible c b =&gt; (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#preview"><span class="hs-pragma hs-type">preview</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">{- |
'use' is ('^.') (or 'view') which implicitly operates on the state; for instance, if your state is a record containing a field @foo@, you can write

@
x \&lt;- 'use' foo
@

to extract @foo@ from the state. In other words, 'use' is the same as 'State.gets', but for getters instead of functions.

The implementation of 'use' is straightforward:

@
'use' l = 'State.gets' ('view' l)
@

If you need to extract something with a fold or traversal, you need 'preuse'.
-}</span><span>
</span><span id="line-107"></span><span id="local-6989586621679042285"><span id="local-6989586621679042286"><span id="local-6989586621679042287"><span class="annot"><a href="Lens.Micro.Mtl.html#use"><span class="hs-identifier hs-type">use</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042287"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042286"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getting</span></span><span> </span><span class="annot"><a href="#local-6989586621679042285"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042287"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042285"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042286"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042285"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-108"></span><span id="use"><span class="annot"><span class="annottext">use :: Getting a s a -&gt; m a
</span><a href="Lens.Micro.Mtl.html#use"><span class="hs-identifier hs-var hs-var">use</span></a></span></span><span> </span><span id="local-6989586621679042284"><span class="annot"><span class="annottext">Getting a s a
</span><a href="#local-6989586621679042284"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; a) -&gt; m a
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">State.gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting a s a -&gt; s -&gt; a
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="Lens.Micro.Mtl.html#view"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting a s a
</span><a href="#local-6989586621679042284"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#use"><span class="hs-pragma hs-type">use</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">{- |
'preuse' is ('^?') (or 'preview') which implicitly operates on the state &#8211; it takes the state and applies a traversal (or fold) to it to extract the 1st element the traversal points at.

@
'preuse' l = 'State.gets' ('preview' l)
@
-}</span><span>
</span><span id="line-118"></span><span id="local-6989586621679042280"><span id="local-6989586621679042281"><span id="local-6989586621679042282"><span class="annot"><a href="Lens.Micro.Mtl.html#preuse"><span class="hs-identifier hs-type">preuse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042282"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042281"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">First</span></span><span> </span><span class="annot"><a href="#local-6989586621679042280"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042282"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042280"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042281"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679042280"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-119"></span><span id="preuse"><span class="annot"><span class="annottext">preuse :: Getting (First a) s a -&gt; m (Maybe a)
</span><a href="Lens.Micro.Mtl.html#preuse"><span class="hs-identifier hs-var hs-var">preuse</span></a></span></span><span> </span><span id="local-6989586621679042279"><span class="annot"><span class="annottext">Getting (First a) s a
</span><a href="#local-6989586621679042279"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; Maybe a) -&gt; m (Maybe a)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">State.gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Getting (First a) s a -&gt; s -&gt; Maybe a
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="Lens.Micro.Mtl.html#preview"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (First a) s a
</span><a href="#local-6989586621679042279"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#preuse"><span class="hs-pragma hs-type">preuse</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-comment">{- |
This can be used to chain lens operations using @op=@ syntax
rather than @op~@ syntax for simple non-type-changing cases.
&gt;&gt;&gt; (10,20) &amp; _1 .~ 30 &amp; _2 .~ 40
(30,40)

&gt;&gt;&gt; (10,20) &amp;~ do _1 .= 30; _2 .= 40
(30,40)

This does not support type-changing assignment, /e.g./

&gt;&gt;&gt; (10,20) &amp; _1 .~ &quot;hello&quot;
(&quot;hello&quot;,20)
-}</span><span>
</span><span id="line-136"></span><span id="local-6989586621679042277"><span id="local-6989586621679042278"><span class="annot"><a href="Lens.Micro.Mtl.html#%26~"><span class="hs-operator hs-type">(&amp;~)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679042278"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><a href="#local-6989586621679042278"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042277"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042278"><span class="hs-identifier hs-type">s</span></a></span></span></span><span>
</span><span id="line-137"></span><span id="local-6989586621679042276"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679042276"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="%26~"><span class="annot"><span class="annottext">&amp;~ :: s -&gt; State s a -&gt; s
</span><a href="Lens.Micro.Mtl.html#%26~"><span class="hs-operator hs-var hs-var">&amp;~</span></a></span></span><span> </span><span id="local-6989586621679042275"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621679042275"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; s
forall s a. State s a -&gt; s -&gt; s
</span><span class="hs-identifier hs-var">execState</span></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621679042275"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679042276"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-138"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&amp;~</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">1</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%26~"><span class="hs-operator hs-type">&amp;~</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">{- |
Modify state by &#8220;assigning&#8221; a value to a part of the state.

This is merely ('.~') which works in 'MonadState':

@
l '.=' x = 'State.modify' (l '.~' x)
@

If you also want to know the value that was replaced by ('.='), use ('&lt;&lt;.=').
-}</span><span>
</span><span id="line-153"></span><span id="local-6989586621679042403"><span id="local-6989586621679042404"><span id="local-6989586621679042405"><span id="local-6989586621679042406"><span class="annot"><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-type">(.=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042406"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042405"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042406"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042406"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042404"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042403"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042403"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042405"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-154"></span><span id="local-6989586621679042273"><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042273"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id=".%3D"><span class="annot"><span class="annottext">.= :: ASetter s s a b -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-var hs-var">.=</span></a></span></span><span> </span><span id="local-6989586621679042272"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042272"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; s) -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">State.modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042273"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a b -&gt; b -&gt; s -&gt; s
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042272"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">.=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-type">.=</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">{- |
A synonym for ('.=').
-}</span><span>
</span><span id="line-162"></span><span id="local-6989586621679042266"><span id="local-6989586621679042267"><span id="local-6989586621679042268"><span id="local-6989586621679042269"><span class="annot"><a href="Lens.Micro.Mtl.html#assign"><span class="hs-identifier hs-type">assign</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042269"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042268"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042269"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042269"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042267"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042266"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042268"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-163"></span><span id="assign"><span class="annot"><span class="annottext">assign :: ASetter s s a b -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#assign"><span class="hs-identifier hs-var hs-var">assign</span></a></span></span><span> </span><span id="local-6989586621679042265"><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042265"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679042264"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042264"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042265"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a b -&gt; b -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042264"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-164"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#assign"><span class="hs-pragma hs-type">assign</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">{- |
('?=') is a version of ('.=') that wraps the value into 'Just' before setting.

@
l '?=' b = l '.=' Just b
@

It can be useful in combination with 'at'.
-}</span><span>
</span><span id="line-175"></span><span id="local-6989586621679042260"><span id="local-6989586621679042261"><span id="local-6989586621679042262"><span id="local-6989586621679042263"><span class="annot"><a href="Lens.Micro.Mtl.html#%3F%3D"><span class="hs-operator hs-type">(?=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042263"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042262"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042263"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042263"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042261"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679042260"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042260"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042262"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-176"></span><span id="local-6989586621679042259"><span class="annot"><span class="annottext">ASetter s s a (Maybe b)
</span><a href="#local-6989586621679042259"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3F%3D"><span class="annot"><span class="annottext">?= :: ASetter s s a (Maybe b) -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%3F%3D"><span class="hs-operator hs-var hs-var">?=</span></a></span></span><span> </span><span id="local-6989586621679042258"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042258"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a (Maybe b)
</span><a href="#local-6989586621679042259"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a (Maybe b) -&gt; Maybe b -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042258"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-177"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">?=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3F%3D"><span class="hs-operator hs-type">?=</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">{- |
('&lt;~') is a version of ('.=') that takes a monadic value (and then executes it and assigns the result to the lens).

@
l '&lt;~' mb = do
  b &lt;- mb
  l '.=' b
@
-}</span><span>
</span><span id="line-190"></span><span id="local-6989586621679042254"><span id="local-6989586621679042255"><span id="local-6989586621679042256"><span id="local-6989586621679042257"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C~"><span class="hs-operator hs-type">(&lt;~)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042255"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042254"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042254"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-191"></span><span id="local-6989586621679042253"><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042253"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C~"><span class="annot"><span class="annottext">&lt;~ :: ASetter s s a b -&gt; m b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%3C~"><span class="hs-operator hs-var hs-var">&lt;~</span></a></span></span><span> </span><span id="local-6989586621679042252"><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679042252"><span class="hs-identifier hs-var">mb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679042252"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="annot"><span class="annottext">m b -&gt; (b -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042253"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a b -&gt; b -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;~</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">2</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C~"><span class="hs-operator hs-type">&lt;~</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-comment">{- |
Modify state by applying a function to a part of the state. An example:

&gt;&gt;&gt; execState (do _1 %= (+1); _2 %= reverse) (1,&quot;hello&quot;)
(2,&quot;olleh&quot;)

Implementation:

@
l '%=' f = 'State.modify' (l '%~' f)
@

If you also want to get the value before\/after the modification, use ('&lt;&lt;%=')\/('&lt;%=').

There are a few specialised versions of ('%=') which mimic C operators:

* ('+=') for addition
* ('-=') for substraction
* ('*=') for multiplication
* ('//=') for division
-}</span><span>
</span><span id="line-217"></span><span id="local-6989586621679042376"><span id="local-6989586621679042377"><span id="local-6989586621679042378"><span id="local-6989586621679042379"><span class="annot"><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-type">(%=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042379"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042378"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042379"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042379"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042376"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042378"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-218"></span><span id="local-6989586621679042251"><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042251"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%25%3D"><span class="annot"><span class="annottext">%= :: ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var hs-var">%=</span></a></span></span><span> </span><span id="local-6989586621679042250"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042250"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; s) -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">State.modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042251"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a b -&gt; (a -&gt; b) -&gt; s -&gt; s
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042250"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">%=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-type">%=</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">{- |
A synonym for ('%=').
-}</span><span>
</span><span id="line-226"></span><span id="local-6989586621679042245"><span id="local-6989586621679042246"><span id="local-6989586621679042247"><span id="local-6989586621679042248"><span class="annot"><a href="Lens.Micro.Mtl.html#modifying"><span class="hs-identifier hs-type">modifying</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042248"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042247"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042248"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042248"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042246"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042245"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042246"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042247"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-227"></span><span id="modifying"><span class="annot"><span class="annottext">modifying :: ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#modifying"><span class="hs-identifier hs-var hs-var">modifying</span></a></span></span><span> </span><span id="local-6989586621679042244"><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042244"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679042243"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042243"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a b
</span><a href="#local-6989586621679042244"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042243"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-228"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#modifying"><span class="hs-pragma hs-type">modifying</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-comment">{- $arith-note

The following operators mimic well-known C operators ('+=', '-=', etc). ('//=') stands for division.

They're implemented like this:

@
l '+=' x = l '%=' (+x)
l '-=' x = l '%=' ('subtract' x)
...
@
-}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span id="local-6989586621679042240"><span id="local-6989586621679042241"><span id="local-6989586621679042242"><span class="annot"><a href="Lens.Micro.Mtl.html#%2B%3D"><span class="hs-operator hs-type">(+=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042242"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042241"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679042240"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042242"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042242"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042240"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042240"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042240"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042241"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-244"></span><span id="local-6989586621679042239"><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042239"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%2B%3D"><span class="annot"><span class="annottext">+= :: ASetter s s a a -&gt; a -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%2B%3D"><span class="hs-operator hs-var hs-var">+=</span></a></span></span><span> </span><span id="local-6989586621679042238"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042238"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042239"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a a -&gt; (a -&gt; a) -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042238"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">+=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2B%3D"><span class="hs-operator hs-type">+=</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span id="local-6989586621679042234"><span id="local-6989586621679042235"><span id="local-6989586621679042236"><span class="annot"><a href="Lens.Micro.Mtl.html#-%3D"><span class="hs-operator hs-type">(-=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042236"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042235"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679042234"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042236"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042236"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042234"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042234"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042234"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042235"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-250"></span><span id="local-6989586621679042233"><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042233"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="-%3D"><span class="annot"><span class="annottext">-= :: ASetter s s a a -&gt; a -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#-%3D"><span class="hs-operator hs-var hs-var">-=</span></a></span></span><span> </span><span id="local-6989586621679042232"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042232"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042233"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a a -&gt; (a -&gt; a) -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">subtract</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042232"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">-=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#-%3D"><span class="hs-operator hs-type">-=</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span id="local-6989586621679042228"><span id="local-6989586621679042229"><span id="local-6989586621679042230"><span class="annot"><a href="Lens.Micro.Mtl.html#%2A%3D"><span class="hs-operator hs-type">(*=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042229"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679042228"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042228"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042228"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042228"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042229"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-256"></span><span id="local-6989586621679042227"><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042227"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%2A%3D"><span class="annot"><span class="annottext">*= :: ASetter s s a a -&gt; a -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%2A%3D"><span class="hs-operator hs-var hs-var">*=</span></a></span></span><span> </span><span id="local-6989586621679042226"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042226"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042227"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a a -&gt; (a -&gt; a) -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042226"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2A%3D"><span class="hs-operator hs-type">*=</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span id="local-6989586621679042222"><span id="local-6989586621679042223"><span id="local-6989586621679042224"><span class="annot"><a href="Lens.Micro.Mtl.html#%2F%2F%3D"><span class="hs-operator hs-type">(//=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042224"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042223"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679042222"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679042224"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042224"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042222"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042222"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042222"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042223"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-262"></span><span id="local-6989586621679042221"><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042221"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%2F%2F%3D"><span class="annot"><span class="annottext">//= :: ASetter s s a a -&gt; a -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%2F%2F%3D"><span class="hs-operator hs-var hs-var">//=</span></a></span></span><span> </span><span id="local-6989586621679042220"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042220"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASetter s s a a
</span><a href="#local-6989586621679042221"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter s s a a -&gt; (a -&gt; a) -&gt; m ()
forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="Lens.Micro.Mtl.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042220"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">//=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%2F%2F%3D"><span class="hs-operator hs-type">//=</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">{- |
Modify state and return the modified (new) value.

@
l '&lt;%=' f = do
  l '%=' f
  'use' l
@
-}</span><span>
</span><span id="line-276"></span><span id="local-6989586621679042333"><span id="local-6989586621679042334"><span id="local-6989586621679042335"><span id="local-6989586621679042336"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%25%3D"><span class="hs-operator hs-type">(&lt;%=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042336"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042335"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042334"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042336"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042336"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042333"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042334"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042333"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042334"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042335"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042334"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-277"></span><span id="local-6989586621679042218"><span class="annot"><span class="annottext">LensLike ((,) b) s s a b
</span><a href="#local-6989586621679042218"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C%25%3D"><span class="annot"><span class="annottext">&lt;%= :: LensLike ((,) b) s s a b -&gt; (a -&gt; b) -&gt; m b
</span><a href="Lens.Micro.Mtl.html#%3C%25%3D"><span class="hs-operator hs-var hs-var">&lt;%=</span></a></span></span><span> </span><span id="local-6989586621679042217"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042217"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a b
</span><a href="#local-6989586621679042218"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a b -&gt; (a -&gt; (b, b)) -&gt; m b
forall s (m :: * -&gt; *) r a b.
MonadState s m =&gt;
LensLike ((,) r) s s a b -&gt; (a -&gt; (r, b)) -&gt; m r
</span><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-var">%%=</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679042215"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042215"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042215"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042215"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(b -&gt; (b, b)) -&gt; (a -&gt; b) -&gt; a -&gt; (b, b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042217"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-278"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;%=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%25%3D"><span class="hs-operator hs-type">&lt;%=</span></a></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-comment">{- |
Modify state and return the old value (i.e. as it was before the modificaton).

@
l '&lt;&lt;%=' f = do
  old &lt;- 'use' l
  l '%=' f
  return old
@
-}</span><span>
</span><span id="line-292"></span><span id="local-6989586621679042210"><span id="local-6989586621679042211"><span id="local-6989586621679042212"><span id="local-6989586621679042213"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C%25%3D"><span class="hs-operator hs-type">(&lt;&lt;%=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042212"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042211"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042211"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042210"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042211"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042210"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042212"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042211"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-293"></span><span id="local-6989586621679042209"><span class="annot"><span class="annottext">LensLike ((,) a) s s a b
</span><a href="#local-6989586621679042209"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C%3C%25%3D"><span class="annot"><span class="annottext">&lt;&lt;%= :: LensLike ((,) a) s s a b -&gt; (a -&gt; b) -&gt; m a
</span><a href="Lens.Micro.Mtl.html#%3C%3C%25%3D"><span class="hs-operator hs-var hs-var">&lt;&lt;%=</span></a></span></span><span> </span><span id="local-6989586621679042208"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042208"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LensLike ((,) a) s s a b
</span><a href="#local-6989586621679042209"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LensLike ((,) a) s s a b -&gt; (a -&gt; (a, b)) -&gt; m a
forall s (m :: * -&gt; *) r a b.
MonadState s m =&gt;
LensLike ((,) r) s s a b -&gt; (a -&gt; (r, b)) -&gt; m r
</span><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-var">%%=</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679042207"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042207"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042207"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679042208"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042207"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&lt;%=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C%25%3D"><span class="hs-operator hs-type">&lt;&lt;%=</span></a></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="hs-comment">{- |
Set state and return the old value.

@
l '&lt;&lt;.=' b = do
  old &lt;- 'use' l
  l '.=' b
  return old
@
-}</span><span>
</span><span id="line-308"></span><span id="local-6989586621679042203"><span id="local-6989586621679042204"><span id="local-6989586621679042205"><span id="local-6989586621679042206"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C.%3D"><span class="hs-operator hs-type">(&lt;&lt;.=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042206"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042204"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042206"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042206"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042204"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042203"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042203"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042204"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-309"></span><span id="local-6989586621679042202"><span class="annot"><span class="annottext">LensLike ((,) a) s s a b
</span><a href="#local-6989586621679042202"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C%3C.%3D"><span class="annot"><span class="annottext">&lt;&lt;.= :: LensLike ((,) a) s s a b -&gt; b -&gt; m a
</span><a href="Lens.Micro.Mtl.html#%3C%3C.%3D"><span class="hs-operator hs-var hs-var">&lt;&lt;.=</span></a></span></span><span> </span><span id="local-6989586621679042201"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042201"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LensLike ((,) a) s s a b
</span><a href="#local-6989586621679042202"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LensLike ((,) a) s s a b -&gt; (a -&gt; (a, b)) -&gt; m a
forall s (m :: * -&gt; *) r a b.
MonadState s m =&gt;
LensLike ((,) r) s s a b -&gt; (a -&gt; (r, b)) -&gt; m r
</span><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-var">%%=</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679042200"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042200"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679042200"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042201"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&lt;.=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3C.%3D"><span class="hs-operator hs-type">&lt;&lt;.=</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">{- |
Set state and return new value.

@
l '&lt;.=' b = do
  l '.=' b
  return b
@
-}</span><span>
</span><span id="line-323"></span><span id="local-6989586621679042196"><span id="local-6989586621679042197"><span id="local-6989586621679042198"><span id="local-6989586621679042199"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C.%3D"><span class="hs-operator hs-type">(&lt;.=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042199"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042198"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042197"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042199"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042199"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042196"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042197"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042197"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042198"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042197"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-324"></span><span id="local-6989586621679042195"><span class="annot"><span class="annottext">LensLike ((,) b) s s a b
</span><a href="#local-6989586621679042195"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C.%3D"><span class="annot"><span class="annottext">&lt;.= :: LensLike ((,) b) s s a b -&gt; b -&gt; m b
</span><a href="Lens.Micro.Mtl.html#%3C.%3D"><span class="hs-operator hs-var hs-var">&lt;.=</span></a></span></span><span> </span><span id="local-6989586621679042194"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042194"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a b
</span><a href="#local-6989586621679042195"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a b -&gt; (a -&gt; b) -&gt; m b
forall s (m :: * -&gt; *) b a.
MonadState s m =&gt;
LensLike ((,) b) s s a b -&gt; (a -&gt; b) -&gt; m b
</span><a href="Lens.Micro.Mtl.html#%3C%25%3D"><span class="hs-operator hs-var">&lt;%=</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; a -&gt; b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042194"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-325"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;.=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C.%3D"><span class="hs-operator hs-type">&lt;.=</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-comment">{- |
('&lt;?=') is a version of ('&lt;.=') that wraps the value into 'Just' before setting.

@
l '&lt;?=' b = do
  l '.=' Just b
  'return' b
@

It can be useful in combination with 'at'.
-}</span><span>
</span><span id="line-340"></span><span id="local-6989586621679042189"><span id="local-6989586621679042190"><span id="local-6989586621679042191"><span id="local-6989586621679042192"><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3F%3D"><span class="hs-operator hs-type">(&lt;?=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042192"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042190"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042192"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042192"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042189"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679042190"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042190"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042190"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-341"></span><span id="local-6989586621679042188"><span class="annot"><span class="annottext">LensLike ((,) b) s s a (Maybe b)
</span><a href="#local-6989586621679042188"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%3C%3F%3D"><span class="annot"><span class="annottext">&lt;?= :: LensLike ((,) b) s s a (Maybe b) -&gt; b -&gt; m b
</span><a href="Lens.Micro.Mtl.html#%3C%3F%3D"><span class="hs-operator hs-var hs-var">&lt;?=</span></a></span></span><span> </span><span id="local-6989586621679042187"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042187"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a (Maybe b)
</span><a href="#local-6989586621679042188"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LensLike ((,) b) s s a (Maybe b) -&gt; (a -&gt; (b, Maybe b)) -&gt; m b
forall s (m :: * -&gt; *) r a b.
MonadState s m =&gt;
LensLike ((,) r) s s a b -&gt; (a -&gt; (r, b)) -&gt; m r
</span><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-var">%%=</span></a></span><span> </span><span class="annot"><span class="annottext">(b, Maybe b) -&gt; a -&gt; (b, Maybe b)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042187"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679042187"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;?=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%3C%3F%3D"><span class="hs-operator hs-type">&lt;?=</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span id="local-6989586621679042352"><span id="local-6989586621679042353"><span id="local-6989586621679042354"><span id="local-6989586621679042355"><span id="local-6989586621679042356"><span class="annot"><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-type">(%%=)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679042356"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042355"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LensLike</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042354"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679042356"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042356"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042353"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042352"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042353"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679042354"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679042352"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679042355"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679042354"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span><span class="hs-cpp">
#if MIN_VERSION_mtl(2,1,1)
</span><span id="local-6989586621679042186"><span class="annot"><span class="annottext">LensLike ((,) r) s s a b
</span><a href="#local-6989586621679042186"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="%25%25%3D"><span class="annot"><span class="annottext">%%= :: LensLike ((,) r) s s a b -&gt; (a -&gt; (r, b)) -&gt; m r
</span><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-var hs-var">%%=</span></a></span></span><span> </span><span id="local-6989586621679042185"><span class="annot"><span class="annottext">a -&gt; (r, b)
</span><a href="#local-6989586621679042185"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (r, s)) -&gt; m r
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; (a, s)) -&gt; m a
</span><span class="hs-identifier hs-var">State.state</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LensLike ((,) r) s s a b
</span><a href="#local-6989586621679042186"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; (r, b)
</span><a href="#local-6989586621679042185"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-identifier">l</span><span> </span><span class="hs-operator">%%=</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-special">(</span><span class="hs-identifier">r</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">s</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">State.gets</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">l</span><span> </span><span class="hs-identifier">f</span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-identifier">State.put</span><span> </span><span class="hs-identifier">s</span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">r</span><span class="hs-cpp">
#endif
</span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">%%=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-keyword">infix</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Lens.Micro.Mtl.html#%25%25%3D"><span class="hs-operator hs-type">%%=</span></a></span><span>
</span><span id="line-358"></span></pre></body></html>