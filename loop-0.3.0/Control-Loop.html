<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Loop</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">loop-0.3.0: Fast loops (for when GHC can't optimize forM_)</span><ul class="links" id="page-menu"><li><a href="src/Control.Loop.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Control.Loop</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Provides a convenient and fast alternative to the common
 <code>forM_ [1..n]</code> idiom, which in many cases GHC cannot fuse to efficient
 code.</p><p>Notes on fast iteration:</p><ul><li>For <code><a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code>, <code>(+1)</code> is almost twice as fast as <code><a href="../base-4.14.3.0/Prelude.html#v:succ" title="Prelude">succ</a></code> because <code><a href="../base-4.14.3.0/Prelude.html#v:succ" title="Prelude">succ</a></code>
   does an overflow check.</li><li>For <code><a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code>, you can get around that while still using <code><a href="../base-4.14.3.0/Prelude.html#t:Enum" title="Prelude">Enum</a></code> using
   <code>toEnum . (+ 1) . fromEnum</code>.</li><li>However, <code>toEnum . (+ 1) . fromEnum</code> is slower than <code><a href="../base-4.14.3.0/Prelude.html#v:succ" title="Prelude">succ</a></code> for
   <code>Word32</code> on 64-bit machines since <code><a href="../base-4.14.3.0/Prelude.html#v:toEnum" title="Prelude">toEnum</a></code> has to check if the
   given <code><a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> exceeds 32 bits.</li><li>Using <code>(+1)</code> from <code><a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a></code> is always the fastest way, but it gives
   no overflow checking.</li><li>Using <code><a href="Control-Loop.html#v:forLoop" title="Control.Loop">forLoop</a></code> you can flexibly pick the way of increasing the value
   that best fits your needs.</li><li>The currently recommended replacement for <code>forM_ [1..n]</code> is
   <code>forLoop 1 (&lt;= n) (+1)</code>.</li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:forLoop">forLoop</a> :: <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; (a -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:forLoopState">forLoopState</a> :: <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; b -&gt; (b -&gt; a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:forLoopFold">forLoopFold</a> :: a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; acc -&gt; (acc -&gt; a -&gt; acc) -&gt; acc</li><li class="src short"><a href="#v:numLoop">numLoop</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a, <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; a -&gt; (a -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:numLoopState">numLoopState</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; a -&gt; b -&gt; (b -&gt; a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:numLoopFold">numLoopFold</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; a -&gt; acc -&gt; (acc -&gt; a -&gt; acc) -&gt; acc</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:forLoop" class="def">forLoop</a> :: <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; (a -&gt; m ()) -&gt; m () <a href="src/Control.Loop.html#forLoop" class="link">Source</a> <a href="#v:forLoop" class="selflink">#</a></p><div class="doc"><p><code>forLoop start cond inc f</code>: A C-style for loop with starting value,
 loop condition and incrementor.</p></div></div><div class="top"><p class="src"><a id="v:forLoopState" class="def">forLoopState</a> :: <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; b -&gt; (b -&gt; a -&gt; m b) -&gt; m b <a href="src/Control.Loop.html#forLoopState" class="link">Source</a> <a href="#v:forLoopState" class="selflink">#</a></p><div class="doc"><p><code>forLoopState start cond inc initialState f</code>: A C-style for loop with
 starting value, loop condition, incrementor and a state that is threaded
 through the computation.</p></div></div><div class="top"><p class="src"><a id="v:forLoopFold" class="def">forLoopFold</a> :: a -&gt; (a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; (a -&gt; a) -&gt; acc -&gt; (acc -&gt; a -&gt; acc) -&gt; acc <a href="src/Control.Loop.html#forLoopFold" class="link">Source</a> <a href="#v:forLoopFold" class="selflink">#</a></p><div class="doc"><p><code>forLoopFold start cond inc acc0 f</code>: A pure fold using a for loop
 instead of a list for performance.</p><p>Care is taken that <code>acc0</code> not be strictly evaluated if unless done so by <code>f</code>.</p></div></div><div class="top"><p class="src"><a id="v:numLoop" class="def">numLoop</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a, <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; a -&gt; (a -&gt; m ()) -&gt; m () <a href="src/Control.Loop.html#numLoop" class="link">Source</a> <a href="#v:numLoop" class="selflink">#</a></p><div class="doc"><p><code>numLoop start end f</code>: Loops over a contiguous numerical range, including
 <code>end</code>.</p><p>Does nothing when not <code>start &lt;= end</code>.</p><p>It uses <code>(+ 1)</code> so for most integer types it has no bounds (overflow) check.</p></div></div><div class="top"><p class="src"><a id="v:numLoopState" class="def">numLoopState</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; a -&gt; b -&gt; (b -&gt; a -&gt; m b) -&gt; m b <a href="src/Control.Loop.html#numLoopState" class="link">Source</a> <a href="#v:numLoopState" class="selflink">#</a></p><div class="doc"><p><code>numLoopState start end f initialState</code>: Loops over a contiguous numerical
 range, including <code>end</code> threading a state through the computation.</p><p>It uses <code>(+ 1)</code> so for most integer types it has no bounds (overflow) check.</p></div></div><div class="top"><p class="src"><a id="v:numLoopFold" class="def">numLoopFold</a> :: (<a href="../base-4.14.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; a -&gt; acc -&gt; (acc -&gt; a -&gt; acc) -&gt; acc <a href="src/Control.Loop.html#numLoopFold" class="link">Source</a> <a href="#v:numLoopFold" class="selflink">#</a></p><div class="doc"><p><code>numLoopFold start end acc0 f</code>: A pure fold over a contiguous numerical
 range, including <code>end</code>.</p><p>It uses <code>(+ 1)</code> so for most integer types it has no bounds (overflow) check.</p><p>Care is taken that <code>acc0</code> not be strictly evaluated if unless done so by <code>f</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>